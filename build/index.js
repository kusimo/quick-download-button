!function(t){var e={};function o(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=6)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e){!function(){t.exports=this.wp.i18n}()},function(t,e){!function(){t.exports=this.wp.components}()},function(t,e){!function(){t.exports=this.wp.blockEditor}()},function(t,e){!function(){t.exports=this.wp.primitives}()},function(t,e){!function(){t.exports=this.wp.blocks}()},function(t,e,o){"use strict";o.r(e);var a=o(0),n=o(5),l=o(4),r=o(1),d=o(3),c=o(2),i=(o(7),o(8),Object(a.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(a.createElement)(l.Path,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"})));Object(n.registerBlockType)("quick-download-button/download-button",{title:Object(r.__)("Download Button","quick-download-button"),icon:i,description:Object(r.__)("Use download button for your file download link.","quick-download-button"),category:"widgets",keywords:[Object(r.__)("download","quick-download-button"),Object(r.__)("button","quick-download-button")],attributes:{downloadTitle:{type:"string",source:"text",selector:"button",default:Object(r.__)("Download","quick-download-button")},downloadTitlePlaceholder:{type:"string",source:"attribute",selector:"button",attribute:"title",default:Object(r.__)("Download","quick-download-button")},downloadPageId:{type:"string",source:"attribute",selector:"button",attribute:"data-page-id",default:qdbu_data.download_page_id},downloadAttachmentId:{type:"string",source:"attribute",selector:"button",attribute:"data-attachment-id"},downloadFormat:{type:"string",source:"attribute",selector:"p.up i",attribute:"class",default:"fi fi-file"},downloadFileSize:{type:"string",source:"text",selector:"p.down",default:Object(r.__)("File size","quick-download-button")},downloadWaitTime:{type:"string",source:"attribute",selector:"button",attribute:"data-wait-time",default:0},externalUrl:{type:"string",source:"attribute",selector:"button",attribute:"data-external-url"},waitDuration:{type:"string",source:"attritube",selector:"button",attribute:"data-wait-duration",default:"0"},waitMessage:{type:"string",source:"attribute",selector:"button",attribute:"data-msg"},spinnerValue:{type:"string",source:"attribute",selector:"button",attribute:"data-spinner"},useExternalLink:{type:Boolean,source:"attribute",selector:"button",attribute:"ext",default:!1},backgroundColor:{type:"string"},haveExternal:{type:"boolean"},pID:{type:"string",source:"attribute",selector:"button",attribute:"data-id"}},edit:function(t){var e=t.attributes,o=e.downloadTitle,n=e.downloadFileSize,l=e.downloadPageId,u=e.downloadAttachmentId,s=e.downloadFormat,b=e.downloadTitlePlaceholder,p=e.haveExternal,m=e.externalUrl,w=e.waitDuration,f=e.waitMessage,g=e.spinnerValue,_=e.backgroundColor,j=e.pID,O=t.setAttributes,v=t.className,h=function(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)},x=p?Object(a.createElement)(c.TextControl,{label:Object(r.__)("".concat(h(m)?"Enter URL (Url is valid)":"Enter URL (*Provide a valid URL)"),"quick-download-button"),help:Object(r.__)("Don't use external URL if the file is located on your site. Double click on the download icon to upload file.","quick-download-button"),value:m,onChange:function(t){O({externalUrl:t}),h(m)&&updateMetaValue(m)}}):"",E=parseInt(g)>0?Object(a.createElement)(c.TextControl,{label:Object(r.__)("Message to the user","quick-download-button"),value:f,placeholder:Object(r.__)("Please wait...","quick-download-button"),onChange:function(t){O({waitMessage:t})}}):"";return[Object(a.createElement)(d.InspectorControls,null,Object(a.createElement)(c.PanelBody,{title:Object(r.__)("Color settings","quick-download-button")},Object(a.createElement)("div",{className:"components-base-control"},Object(a.createElement)("div",{className:"component-base-control__field"},Object(a.createElement)("label",{className:"components-base-control__label qdbu-editor-label"},Object(r.__)("Background color","quick-download-button")),Object(a.createElement)(d.ColorPalette,{value:t.backgroundColor,onChange:function(t){O({backgroundColor:t})}})))),Object(a.createElement)(c.PanelBody,{title:Object(r.__)("URL settings","quick-download-button")},Object(a.createElement)("div",{className:"components-base-control"},Object(a.createElement)("div",{className:"component-base-control__field"},Object(a.createElement)(c.ToggleControl,{label:Object(r.__)("External URL","quick-download-button"),help:p?Object(r.__)("Use external URL.","quick-download-button"):Object(r.__)("Do not use External URL. Please double click the download icon to upload file from your site.","quick-download-button"),checked:p,onChange:function(t){O({haveExternal:t}),!1===p&&O({externalUrl:""})}}),x))),Object(a.createElement)(c.PanelBody,{title:Object(r.__)("Countdown settings","quick-download-button")},Object(a.createElement)("div",{className:"components-base-control"},Object(a.createElement)("div",{className:"component-base-control__field qdbu-label-mtop"},Object(a.createElement)(c.RadioControl,{label:Object(r.__)("Timer","quick-download-button"),help:Object(r.__)("The amount of time in seconds you want the user to wait before the download begins. Default is 0.","quick-download-button"),selected:g,options:[{label:"0",value:"0"},{label:"10",value:"10"},{label:"20",value:"20"},{label:"30",value:"30"}],onChange:function(t){O({spinnerValue:t})}}),E)))),Object(a.createElement)("div",{className:"".concat(v," button--download")},Object(a.createElement)("div",{className:"".concat(p?"custom-download-button-inner ext-link":"custom-download-button-inner")},Object(a.createElement)("button",{className:"g-btn f-l position-relative shadow",type:"button",title:b,"data-attachment-id":u,"data-page-id":l,"data-post-id":"","data-have-external":p,"data-external-url":m,"data-wait-duration":w,"data-spinner":g,"data-msg":f,"data-id":j,onSubmit:function(t){t.preventDefault()}},Object(a.createElement)(d.RichText,{placeholder:Object(r.__)("Download","quick-download-button"),onChange:function(t){O({downloadTitle:t}),O({downloadTitlePlaceholder:t}),O({downloadWaitTime:"0"}),""!==postId&&null!==postId&&O({pID:postId})},value:o})),Object(a.createElement)("p",{className:"up",style:{background:_}},Object(a.createElement)("i",{className:s}),Object(a.createElement)(d.MediaUpload,{onSelect:function(t){O({downloadFileSize:t.filesizeHumanReadable});var e=parseInt(t.id)+parseInt(l);t.url;O({downloadAttachmentId:e}),O({downloadPageId:qdbu_data.download_page_id});var o=t.url.substr(t.url.lastIndexOf(".")+1).trim();if(!0===["jpg","jpeg","tiff","png","bmp","gif"].includes(o.toLowerCase())){O({downloadFormat:"fi fi-image"})}var a=["pdf","mp3","mov","zip","txt","doc","xml","mp4","ppt","csv"];if(!0===a.includes(o.toLowerCase())){var n=a.indexOf(o),r=a["".concat(n)];O({downloadFormat:"fi fi-"+r})}},value:t.attributes.downloadUrl,render:function(t){var e=t.open;return Object(a.createElement)(c.Button,{className:"custom-download-logo__button",onClick:e,icon:i,showTooltip:"true",label:Object(r.__)("Upload File.","quick-download-button")})}})),Object(a.createElement)("p",{className:"down",style:{background:_}},Object(a.createElement)("i",{className:"fi-folder-o"}),n)))]},save:function(t){var e=t.attributes;return Object(a.createElement)("div",{className:"button--download"},Object(a.createElement)("div",{className:"".concat(e.haveExternal?"custom-download-button-inner ext-link":"custom-download-button-inner")},Object(a.createElement)("button",{className:"g-btn f-l position-relative shadow",type:"button","data-attachment-id":e.downloadAttachmentId,"data-page-id":e.downloadPageId,"data-post-id":"","data-have-external":e.haveExternal,"data-external-url":e.externalUrl,"data-wait-duration":t.attributes.waitDuration,"data-msg":e.waitMessage,"data-spinner":e.spinnerValue,"data-id":e.pID,title:e.downloadTitlePlaceholder},Object(a.createElement)(d.RichText.Content,{value:e.downloadTitle})),Object(a.createElement)("p",{className:"up",style:{background:e.backgroundColor}},Object(a.createElement)("i",{className:e.downloadFormat})),Object(a.createElement)("p",{className:"down",style:{background:e.backgroundColor}},Object(a.createElement)("i",{className:"fi-folder-o"}),t.attributes.downloadFileSize)))}})},function(t,e){!function(){t.exports=this.wp.coreData}()},function(t,e){!function(){t.exports=this.wp.data}()}]);